#include "pic.h"

void pic_init() {
    outb(0x20, 0x11); // 初始化主片
    outb(0xA0, 0x11); // 初始化从片
    outb(0x21, 0x20); // 主片偏移设为 0x20
    outb(0xA1, 0x28); // 从片偏移设为 0x28
    outb(0x21, 0x04); // 告知主片 IRQ2 连接从片
    outb(0xA1, 0x02); // 告知从片连接主片 IRQ2
    outb(0x21, 0x01); // 8086 模式
    outb(0xA1, 0x01);

    // 关键：解除屏蔽。0xFD 是 11111101b，开启 IRQ 1 (键盘)
    outb(0x21, 0xFD); 
    outb(0xA1, 0xFF);
}